<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Markdown to LaTeX (pandoc-wasm)</title>
  <style>
    textarea { width: 100%; height: 200px; }
    pre, #renderedLatex { background: #f0f0f0; padding: 10px; white-space: pre-wrap; }
  </style>
  <!-- MathJax for rendering LaTeX -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</head>
<body>
  <h1>Markdown to LaTeX Converter</h1>
  <textarea id="mdInput"># Hello World\nThis is **bold** text and some math: $x^2 + y^2 = z^2$</textarea>
  <button id="convertBtn">Convert</button>

  <h2>LaTeX Output</h2>
  <pre id="latexOutput">Initializing...</pre>

  <h2>Rendered Output</h2>
  <div id="renderedLatex">Waiting...</div>

  <script type="module">
    import { Pandoc } from "https://cdn.jsdelivr.net/npm/pandoc-wasm@0.0.2/+esm";

    const textarea = document.getElementById("mdInput");
    const btn = document.getElementById("convertBtn");
    const output = document.getElementById("latexOutput");
    const rendered = document.getElementById("renderedLatex");

    const pandoc = new Pandoc();
    output.textContent = "Downloading wasm...";
    await pandoc.init();
    output.textContent = "Ready.";

    btn.onclick = async () => {
      output.textContent = "Converting...";
      rendered.innerHTML = "";

      const md = textarea.value;
      const result = await pandoc.run({
        text: md,
        options: { from: "markdown", to: "latex" }
      });

      output.textContent = result;
      rendered.innerHTML = result;
      MathJax.typeset();
    };
  </script>
</body>
</html>
